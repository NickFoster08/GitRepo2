#!/bin/bash
#SBATCH --job-name=Portugal_WL      # Job name
#SBATCH --partition=batch                # Partition (queue) name
#SBATCH --ntasks=1                       # Run on a single CPU
#SBATCH --cpus-per-task=8                # Number of cores per task
#SBATCH --mem=80gb                       # Job memory request
#SBATCH --time=00-12:00:00               # Time limit hrs:min:sec
#SBATCH --output=/scratch/nf26742/scratch/log.%j.out  # Standard output log
#SBATCH --error=/scratch/nf26742/scratch/log.%j.err   # Standard error log

#SBATCH --mail-type=END,FAIL             # Mail events (NONE, BEGIN, END, FAIL, ALL)
#SBATCH --mail-user=nf26742@uga.edu      # Where to send mail

# Specify output directory
OUTDIR="/scratch/nf26742/Wildlife_Bovis/Portugal_WL"

# Create output directory if it doesn't exist
mkdir -p "$OUTDIR"

# Load SRA tools
module load SRA-Toolkit/3.0.3-gompi-2022a

# List of SRR accessions
accessions=(
SRR13199720
SRR13199721
SRR13199723
SRR13199724
SRR13199725
SRR13199726
SRR13199727
SRR13199729
SRR13199730
SRR13199731
SRR13199732
SRR13199733
SRR13199735
SRR13199737
SRR13199738
SRR13199741
SRR13199742
SRR13199743
SRR13199744
SRR13199747
SRR13199748
SRR13199751
SRR13199752
SRR13199754
SRR13199755
SRR13199756
SRR13199759
SRR13199761
SRR23961389
SRR23961390
SRR23961393
SRR23961396
SRR23961397
SRR23961399
SRR23961400
SRR23961401
SRR23961402
SRR23961403
SRR23961404
SRR23961405
SRR23961407
SRR23961409
SRR23961410
SRR23961414
SRR23961415
SRR23961419
SRR23961423
SRR23961424
SRR23961425
SRR23961427
SRR23961432
SRR23961433
SRR23961435
SRR23961437
SRR23961442
SRR23961444
SRR23961445
SRR23961447
SRR23961448
SRR23961450
SRR23961453
SRR23961454
SRR23961455
SRR23961456
SRR23961457
SRR23961458
SRR23961459
SRR23961460
SRR23961467
SRR23961469
SRR23961476
SRR23961477
SRR23961479
SRR23961480
SRR23961484
SRR23961485
SRR23961486
SRR23961487
SRR23961488
SRR23961489
SRR23961490
SRR23961491
SRR23961492
SRR23961494
SRR23961495
SRR23961496
SRR23961497
SRR23961501
SRR23961502
SRR23961504
SRR23961506
SRR23961507
SRR23961508
SRR23961509
SRR23961511
SRR23961512
SRR23961513
SRR23961515
SRR23961516
SRR23961517
SRR23961522
SRR23961526
SRR23961527
SRR23961529
SRR23961531
SRR23961532
SRR23961534
SRR23961539
SRR23961540
SRR23961541
SRR23961542
SRR23961544
SRR23961545
SRR23961548
SRR23961549
SRR23961550
SRR23961551
SRR23961555
SRR23961556
SRR23961557
SRR23961558
SRR23961559
SRR23961561
SRR23961570
SRR23961571
SRR23961597
SRR23961612
)

for srr in "${accessions[@]}"; do
    echo "üîÑ Downloading $srr from NCBI"

    fasterq-dump "$srr" -O "$OUTDIR" --threads 8
    if [[ $? -eq 0 ]]; then
        echo "‚úÖ Successfully downloaded and converted $srr"
    else
        echo "‚ö†Ô∏è  NCBI failed"
    fi
done
