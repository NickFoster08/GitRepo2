#!/bin/bash
#SBATCH --job-name=USA_Human_bovis      # Job name
#SBATCH --partition=batch                # Partition (queue) name
#SBATCH --ntasks=1                       # Run on a single CPU
#SBATCH --cpus-per-task=8                # Number of cores per task
#SBATCH --mem=80gb                       # Job memory request
#SBATCH --time=00-12:00:00               # Time limit hrs:min:sec
#SBATCH --output=/scratch/nf26742/scratch/log.%j.out  # Standard output log
#SBATCH --error=/scratch/nf26742/scratch/log.%j.err   # Standard error log

#SBATCH --mail-type=END,FAIL             # Mail events (NONE, BEGIN, END, FAIL, ALL)
#SBATCH --mail-user=nf26742@uga.edu      # Where to send mail

# Specify output directory
OUTDIR="/scratch/nf26742/MI_Bovis_Any"

# Create output directory if it doesn't exist
mkdir -p "$OUTDIR"

# Load SRA tools
module load SRA-Toolkit/3.0.3-gompi-2022a

# List of SRR accessions
accessions=(
SRR8073606
SRR8073636
SRR8073621
SRR8073635
SRR1791693
SRR1791694
SRR1791696
SRR1791698
SRR1791699
SRR1791716
SRR1791718
SRR1791719
SRR1791730
SRR1791731
SRR1791738
SRR1791757
SRR1791772
SRR1791775
SRR1791803
SRR1791810
SRR1791812
SRR1791817
SRR1791818
SRR1791819
SRR1791825
SRR1791828
SRR1791839
SRR1791854
SRR1791857
SRR1791863
SRR1791874
SRR1791894
SRR1791902
SRR1791925
SRR1791929
SRR1791930
SRR1791931
SRR1791940
SRR1791986
SRR1791999
SRR1792000
SRR1792011
SRR1792012
SRR1792018
SRR1792019
SRR1792021
SRR1792022
SRR1792023
SRR1792024
SRR1792025
SRR1792032
SRR1792037
SRR1792050
SRR1792053
SRR1792054
SRR1792055
SRR1792056
SRR1792057
SRR1792058
SRR1792069
SRR1792089
SRR1792096
SRR1792098
SRR1792112
SRR1792160
SRR1792185
SRR1792186
SRR1792187
SRR1792242
SRR1792243
SRR1792252
SRR1792253
SRR1792255
SRR1792256
SRR1792257
SRR1792262
SRR1792265
SRR1792266
SRR1792267
SRR1792271
SRR1792272
SRR1792285
SRR1792288
SRR1792289
SRR1792290
SRR1792293
SRR1792306
SRR1792323
SRR1792324
SRR1792325
SRR1792331
SRR1792335
SRR1792344
SRR1792351
SRR1792352
SRR1792370
SRR1792373
SRR1792374
SRR1792375
SRR1792376
SRR1792377
SRR1792378
SRR1792379
SRR1792380
SRR1792381
SRR1792382
SRR1792383
SRR1792385
SRR1792386
SRR1792387
SRR1792388
SRR1792389
SRR1792390
SRR1792391
SRR1792392
SRR1792393
SRR1792394
SRR1792395
SRR1792396
SRR1792397
SRR1792398
SRR1792399
SRR1792400
SRR1792401
SRR1792402
SRR1792403
SRR1792404
SRR1792405
SRR1792406
SRR1792407
SRR1792408
SRR1792412
SRR1792418
SRR1792419
SRR1792420
SRR1792423
SRR1792424
SRR1792425
SRR1792426
SRR1792427
SRR1792428
SRR1792430
SRR1792431
SRR1792433
SRR1792434
SRR1792436
SRR1792437
SRR1792439
SRR1792440
SRR1792451
SRR1792452
SRR1792453
SRR1792454
SRR1792456
SRR1792457
SRR1792458
SRR1792459
SRR1792460
SRR1792461
SRR1792462
SRR1792463
SRR1792464
SRR1792465
SRR1792466
SRR1792467
SRR1792468
SRR1792469
SRR1792470
SRR1792471
SRR1792483
SRR1792489
SRR1792497
SRR1792501
SRR1792503
SRR1792507
SRR1792508
SRR1792509
SRR1792510
)

for srr in "${accessions[@]}"; do
    echo "üîÑ Downloading $srr from NCBI"

    fasterq-dump "$srr" -O "$OUTDIR" --threads 8
    if [[ $? -eq 0 ]]; then
        echo "‚úÖ Successfully downloaded and converted $srr"
    else
        echo "‚ö†Ô∏è  NCBI failed"
    fi
done
